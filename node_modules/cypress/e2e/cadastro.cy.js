describe('Cadastro de Usuário', ()=>{
    const url = 'http://localhost:3000/cadastro';

    it('Deve cadastras usuário com sucesso (cenário principal)', () => {
        cy.visit(url)
        cy.get('input[name="name"]').type('Maria')
        cy.get('input[name="email"]').type('maria@mail.com')
        cy.get('input[name="password"]').type('12345678')
        cy.get('input[name="confirmPassword"]').type('12345678')
        cy.get('button[type="submit"]').click()
        cy.on('window:alert', (txt) => {
      expect(txt).to.match(/Cadastro efetuado com sucesso! Faça login para acessar nossa plataforma!\./i);
        });        
    })
    it('Não deve permitir cadastro com email já existente (cenário alternativo 1)', () => {
    cy.visit(url)
    cy.get('input[name="name"]').type('Maria')
    cy.get('input[name="email"]').type('maria@mail.com') // já existe
    cy.get('input[name="password"]').type('12345678')
    cy.get('input[name="confirmPassword"]').type('12345678')
    cy.get('button[type="submit"]').click()
    cy.on('window:alert', (txt) => {
      expect(txt).to.match(/Email já cadastrado\./i);
    });
    //cy.contains('Email já cadastrado.').should('be.visible')
  })

  it('Deve mostrar erros de validação se campos estiverem vazios (cenário alternativo 2)', () => {
    cy.visit(url)
    cy.get('button[type="submit"]').click()
    cy.contains('O nome é obrigatório').should('be.visible')
  })
})